<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Документ без названия</title>
<script type="text/javascript" >
//check for browser support
if(typeof(EventSource)!=="undefined") {
	//create an object, passing it the name and location of the server side script
	var eSource = new EventSource("html5.php");
	//detect message receipt
	
	eSource.onmessage = function(event) {
		//write the received data to the page
		document.getElementById("events").innerHTML = event.data;
	}
	eSorce.onerror = function () {
		document.getElementById("events").innerHTML = "Ошибка, насяльника!";
	}
	eSorce.onopen = function () {
		document.getElementById("events").innerHTML = document.getElementById("events").innerHTML+"Соединение установлено!";
	}
}
else {
	document.getElementById("events").innerHTML="Whoops! Your browser doesn't receive server-sent events.";
}
function ajax(){
	document.getElementById('req').value = "...";
request = new XMLHttpRequest;
request.open("post", "html5.php", true);
request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
request.send("a=16");
request.onreadystatechange = function() {
	if(request.readyState == 4 && request.status == 200) document.getElementById('req').value = "Запрос прошел" + request.responseText;
}
}



</script>
</head>

<body>
<div id='events' >Этот текст должен измениться.</div>

<input id='req' type="button" value='Отправить запрос ajax' onClick="ajax()" />
<div  ></div>


</body>
</html>
